/*******************************************************************
*Copyright(c) 2020 Ocean University of China. All rights reserved. *
*This file is created by: 									 	   *
*............................................................	   *
*............................................................	   *
*............................................................	   *
*............................................................	   *
*..............!M1...M*............+.....*`..................	   *
*......`]]]]]]]YM]]]]MY]]]]EMN~....M]...1M+.KF]]]]]]]ME......	   *
*.........!W*]]YM]]]]MY]]*MK.......M]..*]...K].......M!......	   *
*.........!M...!M....M!...M!.......M].!]....K].......M!......	   *
*.........!M...!M....M!...M!.......M]...F*..KK]]]]]]]M!......	   *
*...........KK..........KE.........M]**YNM;.K].......M!......	   *
*...........KW]]]]]]]]]]WK.........M]..1;...K].......M!......	   *
*...........KW]]]]]]]]]]WK.........M].......K].......M]......	   *
*...........*~..........1;.........F;........................	   *
*............................15020041003......................	   *
*............................................................ 	   *                                                                          

********************************************************************/
#include<stdio.h>
#include<stdlib.h>
#include<sys/types.h>
#include<unistd.h>
int main()
{
	int	 pid1,pid2;
	lockf(1,1,0);
	printf("Parent process:a\n");
	if((pid1=fork())<0)
	{
		printf("child1 fail create\n");
		return 1;
	}
	else if(pid1==0)
	{
		lockf(1,1,0);
		printf("This is child1(pid=%d) process:b\n",getpid());
		lockf(1,0,0);
		return 0 ;
	}
	if((pid2=fork())<0)
	{
		printf("child2 fail create\n");
		return 1;
	}
	else if(pid2==0)
	{
		lockf(1,1,0);
		printf("This is child2(pid=%d) process:c\n",getpid());
		lockf(1,0,0);
		return 0 ;
	}
    return 0;
}
